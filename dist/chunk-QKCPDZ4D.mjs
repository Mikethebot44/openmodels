var x=(a=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(a,{get:(s,t)=>(typeof require<"u"?require:s)[t]}):a)(function(a){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+a+'" is not supported')});import u from"node-fetch";var c=class{constructor(s){this.config=s}};var r=class extends Error{constructor(t,o,e){super(t);this.status=o;this.code=e;this.name="OpenModelsError"}};async function*l(a){if(!a.body)throw new r("Response body is null");if(a.status===401)throw new r("Invalid API key. Please check your credentials.",401);if(a.status===403)throw new r("Insufficient credits. Please top up your account.",403);let t=(await a.text()).split(`
`);for(let o of t){let e=o.trim();if(e!==""){if(e==="[DONE]")return;if(e.startsWith("data: ")){let i=e.slice(6);if(i==="[DONE]")return;try{let d=JSON.parse(i);d.choices?.[0]?.delta?.content&&(yield d.choices[0].delta.content)}catch{continue}}}}}var n=class extends c{async chat(s){let t=`${this.config.baseUrl}/chat`,o={"Content-Type":"application/json",Authorization:`Bearer ${this.config.apiKey}`},e=await u(t,{method:"POST",headers:o,body:JSON.stringify(s)});if(!e.ok){let i=await e.text();throw e.status===401?new r("Invalid API key. Please check your credentials.",401):e.status===403?new r("Insufficient credits. Please top up your account.",403):new r(`Modal API error: ${e.status} ${i}`,e.status)}return e}async embed(s){let t=`${this.config.baseUrl}/embed`,o={"Content-Type":"application/json",Authorization:`Bearer ${this.config.apiKey}`},e=await u(t,{method:"POST",headers:o,body:JSON.stringify(s)});if(!e.ok){let i=await e.text();throw e.status===401?new r("Invalid API key. Please check your credentials.",401):e.status===403?new r("Insufficient credits. Please top up your account.",403):new r(`Modal API error: ${e.status} ${i}`,e.status)}return e}async image(s){let t=`${this.config.baseUrl}/image`,o={"Content-Type":"application/json",Authorization:`Bearer ${this.config.apiKey}`},e=await u(t,{method:"POST",headers:o,body:JSON.stringify(s)});if(!e.ok){let i=await e.text();throw e.status===401?new r("Invalid API key. Please check your credentials.",401):e.status===403?new r("Insufficient credits. Please top up your account.",403):new r(`Modal API error: ${e.status} ${i}`,e.status)}return e}async audioTranscribe(s){let t=`${this.config.baseUrl}/transcribe`,o={"Content-Type":"application/json",Authorization:`Bearer ${this.config.apiKey}`},e=await u(t,{method:"POST",headers:o,body:JSON.stringify(s)});if(!e.ok){let i=await e.text();throw e.status===401?new r("Invalid API key. Please check your credentials.",401):e.status===403?new r("Insufficient credits. Please top up your account.",403):new r(`Modal API error: ${e.status} ${i}`,e.status)}return e}async audioSummarize(s){let t=`${this.config.baseUrl}/summarize`,o={"Content-Type":"application/json",Authorization:`Bearer ${this.config.apiKey}`},e=await u(t,{method:"POST",headers:o,body:JSON.stringify(s)});if(!e.ok){let i=await e.text();throw e.status===401?new r("Invalid API key. Please check your credentials.",401):e.status===403?new r("Insufficient credits. Please top up your account.",403):new r(`Modal API error: ${e.status} ${i}`,e.status)}return e}async visionClassify(s){let t=`${this.config.baseUrl}/classify`,o={"Content-Type":"application/json",Authorization:`Bearer ${this.config.apiKey}`},e=await u(t,{method:"POST",headers:o,body:JSON.stringify(s)});if(!e.ok){let i=await e.text();throw e.status===401?new r("Invalid API key. Please check your credentials.",401):e.status===403?new r("Insufficient credits. Please top up your account.",403):new r(`Modal API error: ${e.status} ${i}`,e.status)}return e}};var f={"image-classification":["google/vit-base-patch16-224","facebook/convnext-base-224","openai/clip-vit-base-patch32"],"text-generation":["microsoft/DialoGPT-medium","meta-llama/Llama-3.1-8B-Instruct","meta-llama/Meta-Llama-3-8B-Instruct"],embedding:["sentence-transformers/all-MiniLM-L6-v2"],"audio-transcribe":["openai/whisper-base"],"audio-summarize":["facebook/bart-large-cnn"],"image-generation":["runwayml/stable-diffusion-v1-5"]};function p(a){let s=f[a];if(!s||s.length===0)throw new Error(`No default models configured for task: ${a}`);return s[0]}var m=class{constructor(s={}){if(!s.apiKey)throw new r("API key is required. Please provide an API key in the client configuration.");if(!s.apiKey.startsWith("om_")||s.apiKey.length<10)throw new r('Invalid API key format. API keys must start with "om_" and be at least 10 characters long.');let t=s.baseUrl||"https://tryscout.dev",o=e=>t.includes("modal.run")||t.includes("/api/")?t:t.includes(".")?`${t}/api/${e}`:`https://tryscout.dev/api/${e}`;this.textProvider=new n({apiKey:s.apiKey,baseUrl:o("text")}),this.embedProvider=new n({apiKey:s.apiKey,baseUrl:o("embed")}),this.imageProvider=new n({apiKey:s.apiKey,baseUrl:o("image")}),this.audioProvider=new n({apiKey:s.apiKey,baseUrl:o("audio")}),this.visionProvider=new n({apiKey:s.apiKey,baseUrl:o("vision")})}async chat(s){try{let t=await this.textProvider.chat(s);return s.stream?l(t):await t.json()}catch(t){throw t instanceof Error?new r(t.message):new r("Unknown error occurred")}}async embed(s){try{return await(await this.embedProvider.embed(s)).json()}catch(t){throw t instanceof Error?new r(t.message):new r("Unknown error occurred")}}async image(s){try{return await(await this.imageProvider.image(s)).json()}catch(t){throw t instanceof Error?new r(t.message):new r("Unknown error occurred")}}async run(s){try{switch(s.task){case"text-generation":{let t=s.model||p("text-generation"),o={...s,model:t},e=await this.textProvider.chat(o);return o.stream?l(e):await e.json()}case"image-generation":{let t=s.model||p("image-generation"),o={...s,model:t};return await(await this.imageProvider.image(o)).json()}case"embedding":{let t=s.model||p("embedding"),o={...s,model:t};return await(await this.embedProvider.embed(o)).json()}case"audio-transcribe":{let t=s.model||p("audio-transcribe"),o={...s,model:t};return await(await this.audioProvider.audioTranscribe(o)).json()}case"audio-summarize":{let t=s.model||p("audio-summarize"),o={...s,model:t};return await(await this.audioProvider.audioSummarize(o)).json()}case"image-classification":{let t=s.model||p("image-classification"),o={...s,model:t};return await(await this.visionProvider.visionClassify(o)).json()}default:throw new r("Unsupported task")}}catch(t){throw t instanceof Error?new r(t.message):new r("Unknown error occurred")}}};function g(a){return new m(a)}var y={"microsoft/DialoGPT-medium":{supportsTopP:!0,supportsStop:!0,supportsTemperature:!0,supportsMaxTokens:!0,supportsStreaming:!0,supportsQuantization:!0,supportedQuantizations:["int8","float16"],maxTokenLimit:1e3,notes:"Conversational model, best for dialog"},"microsoft/DialoGPT-large":{supportsTopP:!0,supportsStop:!0,supportsTemperature:!0,supportsMaxTokens:!0,supportsStreaming:!0,supportsQuantization:!0,supportedQuantizations:["int8","float16"],maxTokenLimit:1e3},"meta-llama/Llama-3.1-8B-Instruct":{supportsTopP:!0,supportsStop:!0,supportsTemperature:!0,supportsMaxTokens:!0,supportsStreaming:!0,supportsQuantization:!0,supportedQuantizations:["int8","int4","float16"],maxTokenLimit:4096,notes:"Instruction-following model"},"meta-llama/Meta-Llama-3-8B-Instruct":{supportsTopP:!0,supportsStop:!0,supportsTemperature:!0,supportsMaxTokens:!0,supportsStreaming:!0,supportsQuantization:!0,supportedQuantizations:["int8","int4","float16"],maxTokenLimit:4096,notes:"Instruction-following model with chat formatting"},"facebook/blenderbot-400M-distill":{supportsTopP:!0,supportsStop:!1,supportsTemperature:!0,supportsMaxTokens:!0,supportsStreaming:!0,supportsQuantization:!0,supportedQuantizations:["int8","float16"],maxTokenLimit:128},"EleutherAI/gpt-neo-2.7B":{supportsTopP:!0,supportsStop:!0,supportsTemperature:!0,supportsMaxTokens:!0,supportsStreaming:!0,supportsQuantization:!0,supportedQuantizations:["int8","int4","float16"],maxTokenLimit:2048}},h={"runwayml/stable-diffusion-v1-5":{supportsTopP:!1,supportsStop:!1,supportsTemperature:!1,supportsMaxTokens:!1,supportsStreaming:!1,supportsQuantization:!0,supportedQuantizations:["float16"],notes:"Size, quality, style parameters supported"},"stabilityai/stable-diffusion-xl-base-1.0":{supportsTopP:!1,supportsStop:!1,supportsTemperature:!1,supportsMaxTokens:!1,supportsStreaming:!1,supportsQuantization:!0,supportedQuantizations:["float16"],notes:"Higher quality, slower generation"}},w={"sentence-transformers/all-MiniLM-L6-v2":{supportsTopP:!1,supportsStop:!1,supportsTemperature:!1,supportsMaxTokens:!1,supportsStreaming:!1,supportsQuantization:!1,notes:"Fast and efficient, good for most tasks"}},b={"google/vit-base-patch16-224":{supportsTopP:!1,supportsStop:!1,supportsTemperature:!1,supportsMaxTokens:!1,supportsStreaming:!1,supportsQuantization:!0,supportedQuantizations:["int8","float16"],notes:"Vision Transformer, good balance"},"facebook/convnext-base-224":{supportsTopP:!1,supportsStop:!1,supportsTemperature:!1,supportsMaxTokens:!1,supportsStreaming:!1,supportsQuantization:!0,supportedQuantizations:["int8","float16"]},"openai/clip-vit-base-patch32":{supportsTopP:!1,supportsStop:!1,supportsTemperature:!1,supportsMaxTokens:!1,supportsStreaming:!1,supportsQuantization:!0,supportedQuantizations:["int8","float16"]}},P={"openai/whisper-base":{supportsTopP:!1,supportsStop:!1,supportsTemperature:!1,supportsMaxTokens:!1,supportsStreaming:!1,supportsQuantization:!0,supportedQuantizations:["int8","float16"],notes:"Fast, good for most languages"},"openai/whisper-small":{supportsTopP:!1,supportsStop:!1,supportsTemperature:!1,supportsMaxTokens:!1,supportsStreaming:!1,supportsQuantization:!0,supportedQuantizations:["int8","float16"],notes:"Better accuracy than base"},"openai/whisper-medium":{supportsTopP:!1,supportsStop:!1,supportsTemperature:!1,supportsMaxTokens:!1,supportsStreaming:!1,supportsQuantization:!0,supportedQuantizations:["int8","float16"],notes:"High accuracy, slower"}};function T(a,s){let t={supportsTopP:!1,supportsStop:!1,supportsTemperature:!1,supportsMaxTokens:!1,supportsStreaming:!1,supportsQuantization:!1},o;switch(s){case"text":o=y;break;case"image":o=h;break;case"embed":o=w;break;case"vision":o=b;break;case"audio":o=P;break;default:return t}return o[a]||t}export{x as a,r as b,l as c,n as d,m as e,g as f,T as g};
//# sourceMappingURL=chunk-QKCPDZ4D.mjs.map